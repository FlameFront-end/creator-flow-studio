.prompt-templates-layout,
.prompt-preview-quick-grid {
  align-items: start;
}

.prompt-templates-editor {
  position: sticky;
  top: 14px;
}

.prompt-studio-empty-state {
  border: 1px dashed rgba(148, 163, 184, 0.36);
  background: rgba(15, 23, 42, 0.22);
}

.prompt-template-card {
  background: rgba(14, 14, 14, 0.9);
  border-color: rgba(255, 255, 255, 0.12);

  &.prompt-template-card-active {
    border-color: rgba(255, 255, 255, 0.24);
    box-shadow: 0 0 0 1px rgba(255, 255, 255, 0.1);
  }
}

.prompt-template-head {
  gap: 10px;
}

.prompt-template-meta {
  min-width: 0;
}

.prompt-template-key-badge {
  align-self: flex-start;
  width: auto;
}

.prompt-template-text {
  border: 1px solid rgba(255, 255, 255, 0.12);
  background: rgba(12, 12, 12, 0.72);
  max-height: 120px;
  overflow: hidden;
  position: relative;

  &::after {
    content: '';
    position: absolute;
    left: 0;
    right: 0;
    bottom: 0;
    height: 34px;
    background: linear-gradient(180deg, rgba(12, 12, 12, 0), rgba(12, 12, 12, 0.95));
    pointer-events: none;
  }

  &.prompt-template-text-open {
    max-height: none;

    &::after {
      display: none;
    }
  }
}

.prompt-template-text-content {
  margin: 0;
  white-space: pre-wrap;
  overflow-wrap: anywhere;
  word-break: break-word;
  color: #e4e4e7;
  font-size: 0.93rem;
  line-height: 1.45;
}

.prompt-preview-quick-actions {
  margin-top: 2px;

  .appui-Button-root {
    min-width: 180px;
  }
}

.ai-provider-settings {
  .ai-provider-hero {
    border: 1px solid rgba(148, 163, 184, 0.22);
    background:
      radial-gradient(120% 90% at 0% 0%, rgba(16, 185, 129, 0.08), transparent 48%),
      radial-gradient(100% 80% at 100% 0%, rgba(14, 165, 233, 0.08), transparent 55%),
      rgba(10, 13, 20, 0.72);
  }

  .ai-provider-library {
    border: 1px solid rgba(148, 163, 184, 0.2);
    background: rgba(8, 11, 18, 0.78);
  }

  .ai-provider-library-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 10px;
  }

  .ai-provider-library-card {
    border: 1px solid rgba(148, 163, 184, 0.2);
    background: rgba(15, 23, 42, 0.28);
  }

  .ai-provider-library-empty-critical {
    border: 1px solid rgba(239, 68, 68, 0.44);
    background: linear-gradient(180deg, rgba(127, 29, 29, 0.24), rgba(127, 29, 29, 0.12));
  }

  .ai-provider-model-select-btn {
    min-width: 0;
    max-width: min(100%, 560px);
    justify-content: flex-start;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }

  .ai-provider-model-row {
    justify-content: flex-start;
    flex-wrap: wrap;
    row-gap: 6px;
  }

  .ai-provider-form-card {
    border: 1px solid rgba(148, 163, 184, 0.2);
    background: rgba(8, 11, 18, 0.82);
  }

  .ai-provider-test-result {
    border: 1px solid rgba(16, 185, 129, 0.34);
    background: linear-gradient(
      180deg,
      rgba(6, 78, 59, 0.28),
      rgba(6, 95, 70, 0.16)
    );
  }

  .ai-provider-test-result-error {
    border-color: rgba(239, 68, 68, 0.36);
    background: linear-gradient(
      180deg,
      rgba(127, 29, 29, 0.28),
      rgba(127, 29, 29, 0.16)
    );
  }

  .ai-provider-actions .appui-Button-root {
    min-width: 170px;
  }

  .ai-provider-actions-divider {
    margin-top: 12px;
    margin-bottom: 12px;
  }

  .ai-provider-inline-field-action {
    width: 100%;
    align-items: flex-end;
  }

  .ai-provider-inline-field-action > :first-child {
    flex: 1 1 auto;
    min-width: 0;
  }

  .ai-provider-inline-field-action .ai-provider-recommend-btn {
    height: 42px;
    min-height: 42px;
    padding-inline: 16px;
    white-space: nowrap;
  }

}

.studio-tab-alert-dot {
  display: inline-flex;
  width: 8px;
  height: 8px;
  border-radius: 999px;
  background: rgba(248, 113, 113, 0.96);
  box-shadow: 0 0 0 2px rgba(248, 113, 113, 0.2);
}

.prompt-preview-redesign {
  .prompt-preview-hero {
    border: 1px solid rgba(148, 163, 184, 0.22);
    background:
      radial-gradient(130% 90% at 0% 0%, rgba(14, 165, 233, 0.08), transparent 52%),
      radial-gradient(110% 90% at 100% 0%, rgba(34, 197, 94, 0.08), transparent 58%),
      rgba(10, 13, 20, 0.72);
  }

  .prompt-preview-config,
  .prompt-preview-result {
    border: 1px solid rgba(148, 163, 184, 0.2);
    background: rgba(8, 11, 18, 0.8);
  }

  .prompt-preview-result {
    position: sticky;
    top: 14px;
    align-self: start;
  }

  .prompt-preview-variables-card {
    border: 1px solid rgba(148, 163, 184, 0.2);
    background: rgba(15, 23, 42, 0.28);
  }
}

:root[data-color-scheme='light'] {
  .prompt-studio-empty-state {
    border-color: rgba(148, 163, 184, 0.42);
    background: rgba(248, 250, 252, 0.88);
  }

  .prompt-template-card {
    background: rgba(248, 250, 252, 0.95);
    border-color: rgba(148, 163, 184, 0.42);

    &.prompt-template-card-active {
      border-color: rgba(14, 165, 233, 0.58);
      box-shadow: 0 0 0 1px rgba(14, 165, 233, 0.18);
    }
  }

  .prompt-template-text {
    border-color: rgba(14, 165, 233, 0.22);
    background: rgba(241, 245, 249, 0.9);

    &::after {
      background: linear-gradient(180deg, rgba(241, 245, 249, 0), rgba(241, 245, 249, 0.98));
    }
  }

  .prompt-template-text-content {
    color: #1e293b;
  }

  .ai-provider-settings {
    .ai-provider-hero {
      border-color: rgba(148, 163, 184, 0.35);
      background:
        radial-gradient(120% 90% at 0% 0%, rgba(16, 185, 129, 0.1), transparent 48%),
        radial-gradient(100% 80% at 100% 0%, rgba(14, 165, 233, 0.08), transparent 55%),
        rgba(255, 255, 255, 0.88);
    }

    .ai-provider-library,
    .ai-provider-form-card,
    .ai-provider-library-card {
      border-color: rgba(148, 163, 184, 0.34);
      background: rgba(248, 250, 252, 0.82);
    }

    .ai-provider-library-empty-critical {
      border-color: rgba(239, 68, 68, 0.4);
      background: rgba(254, 242, 242, 0.86);
    }

    .ai-provider-test-result {
      border-color: rgba(16, 185, 129, 0.36);
      background: rgba(240, 253, 244, 0.9);
    }

    .ai-provider-test-result-error {
      border-color: rgba(239, 68, 68, 0.36);
      background: rgba(254, 242, 242, 0.9);
    }

  }

  .prompt-preview-redesign {
    .prompt-preview-hero {
      border-color: rgba(148, 163, 184, 0.35);
      background:
        radial-gradient(130% 90% at 0% 0%, rgba(14, 165, 233, 0.1), transparent 52%),
        radial-gradient(110% 90% at 100% 0%, rgba(34, 197, 94, 0.09), transparent 58%),
        rgba(255, 255, 255, 0.88);
    }

    .prompt-preview-config,
    .prompt-preview-result,
    .prompt-preview-variables-card {
      border-color: rgba(148, 163, 184, 0.34);
      background: rgba(248, 250, 252, 0.84);
    }
  }

  .studio-tab-alert-dot {
    background: rgba(220, 38, 38, 0.9);
    box-shadow: 0 0 0 2px rgba(220, 38, 38, 0.12);
  }
}

@media (max-width: 75em) {
  .prompt-templates-editor {
    position: static;
  }

  .prompt-preview-quick-actions .appui-Button-root {
    width: 100%;
  }

  .ai-provider-settings .ai-provider-actions .appui-Button-root {
    width: 100%;
    min-width: 0;
  }

  .ai-provider-settings .ai-provider-inline-field-action {
    flex-wrap: wrap;

    .appui-Button-root {
      width: 100%;
    }
  }

  .prompt-preview-redesign {
    .prompt-preview-result {
      position: static;
    }

    .prompt-preview-main-actions .appui-Button-root {
      width: 100%;
    }
  }
}
